@inject HttpClient  Http

<h4 class="text-primary">Already Submitted Vacations</h4>

@if (@Vacations != null && @Vacations.Count > 0)
{
    <table class="table table-striped">
        <thead class="thead thead-light">
            <tr>
                <th>From</th>
                <th>To</th>
                <th>Duration</th>
                <th>Note</th>
                <th>Approved</th>
                <th>Set up out of office email</th>
            </tr>
        </thead>
        <tbody>
            @foreach (Vacation vacation in @Vacations)
            {
            <tr>
                <td>@vacation.FromDate.ToString("dd.MM.yyyy")</td>
                <td>@vacation.TillDate.ToString("dd.MM.yyyy")</td>
                <td>@vacation.Duration</td>
                <td>@vacation.Note</td>
                <td>@vacation.Approved</td>
                <td>@vacation.SetUpOutOfOfficeEmail</td>
            </tr>
            }
        </tbody>
    </table>
}


@functions
{
    List<Vacation> Vacations;

    protected override async Task OnInitAsync()
    {
        int thisYear = DateTime.Today.Year;
        Vacations = await Http.GetJsonAsync<List<Vacation>>($"api/Vacations/GetSubmittedVacations?year={thisYear}");
    }
}