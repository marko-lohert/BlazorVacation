@page "/Reports/WhosOnVacation"

@inject HttpClient Http

<h4 class="text-primary">Who's on vacation in the next 7 days?</h4>

@if (@EmployeesVacations != null && @EmployeesVacations.Count > 0)
{
    <table class="table table-striped">
        <thead class="thead thead-light">
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>From</th>
                <th>Till</th>
            </tr>
        </thead>
        @foreach (var item in EmployeesVacations)
        {
        <tr>
            <td>@item.employee?.FirstName</td>
            <td>@item.employee?.LastName</td>
            <td>@item.vacation?.FromDate.ToString("dd.MM.yyyy")</td>
            <td>@item.vacation?.TillDate.ToString("dd.MM.yyyy")</td>
        </tr>
        }
    </table>
}


@code
{
    public List<(Employee employee, Vacation vacation)>? EmployeesVacations { get; set; }

    protected override async Task OnInitializedAsync()
    {
        EmployeesVacations = await Http.GetJsonAsync<List<(Employee, Vacation)>>($"api/Vacations/WhoIsOnVacation?range=7");
    }
}